var populateChar=function(a,b){return""};
function htmlToPlainText(a,b){function f(){return function(a,b,c,d){var e=0;c&&/start="([0-9]+)"/i.test(c)&&(e=/start="([0-9]+)"/i.exec(c)[1]-1);return"<p>"+d.replace(/<li[^>]*>(((?!<li[^>]*>)(?!<\/li>).)*)<\/li>/gi,function(a,c){var m=0;return c.replace(/(^|(<br \/>))(?!<p>)/gi,function(){return"o"===b&&0===m?(e+=1,m+=1,"<br />"+e+populateChar(n,k-String(e).length)):"<br />"+q})})+"</p>"}}var d=null,g=null,h="underline",l="indention",p="-",k=3,n="-";b&&("function"===typeof b.linkProcess&&(d=b.linkProcess),
"function"===typeof b.imgProcess&&(g=b.imgProcess),b.headingStyle&&(h=b.headingStyle),b.listStyle&&(l=b.listStyle),b.uIndentionChar&&(p=b.uIndentionChar),b.listIndentionTabs&&(k=b.listIndentionTabs),b.oIndentionChar&&(n=b.oIndentionChar));var q=populateChar(p,k);a=String(a).replace(/\n|\r/g," ");a=a.replace(/<\/body>.*/i,"");a=a.replace(/.*<body[^>]*>/i,"");a=a.replace(/<(script|style)( [^>]*)*>((?!<\/\1( [^>]*)*>).)*<\/\1>/gi,"");a=a.replace(/<(\/)?((?!h[1-6]( [^>]*)*>)(?!img( [^>]*)*>)(?!a( [^>]*)*>)(?!ul( [^>]*)*>)(?!ol( [^>]*)*>)(?!li( [^>]*)*>)(?!p( [^>]*)*>)(?!div( [^>]*)*>)(?!td( [^>]*)*>)(?!br( [^>]*)*>)[^>\/])[^>]*>/gi,
"");a=a.replace(/<img([^>]*)>/gi,function(a,b){var c=a="",e=/src="([^"]*)"/i.exec(b);b=/alt="([^"]*)"/i.exec(b);null!==e&&(a=e[1]);null!==b&&(c=b[1]);return"function"===typeof g?g(a,c):"[image] ( "+a+" )"});if("linebreak"===l)a=a.replace(/<\/?ul[^>]*>|<\/?ol[^>]*>|<\/?li[^>]*>/gi,"\n");else if("indention"===l)for(;/<(o|u)l[^>]*>(.*)<\/\1l>/gi.test(a);)a=a.replace(/<(o|u)l([^>]*)>(((?!<(o|u)l[^>]*>)(?!<\/(o|u)l>).)*)<\/\1l>/gi,f());"linebreak"===h?a=a.replace(/<h([1-6])[^>]*>([^<]*)<\/h\1>/gi,"\n$2\n"):
"underline"===h?(a=a.replace(/<h1[^>]*>(((?!<\/h1>).)*)<\/h1>/gi,function(a,b){return"\n&nbsp;\n"+b+"\n\n&nbsp;\n"}),a=a.replace(/<h2[^>]*>(((?!<\/h2>).)*)<\/h2>/gi,function(a,b){return"\n&nbsp;\n"+b+"\n\n&nbsp;\n"}),a=a.replace(/<h([3-6])[^>]*>(((?!<\/h\1>).)*)<\/h\1>/gi,function(a,b,c){return"\n&nbsp;\n"+c+"\n&nbsp;\n"})):"hashify"===h&&(a=a.replace(/<h([1-6])[^>]*>([^<]*)<\/h\1>/gi,function(a,b,c){return"\n&nbsp;\n "+c+"\n&nbsp;\n"}));a=a.replace(/<br( [^>]*)*>|<p( [^>]*)*>|<\/p( [^>]*)*>|<div( [^>]*)*>|<\/div( [^>]*)*>|<td( [^>]*)*>|<\/td( [^>]*)*>/gi,
"\n");a=a.replace(/<a[^>]*href="([^"]*)"[^>]*>([^<]+)<\/a[^>]*>/gi,function(a,b,c){return"function"===typeof d?d(b,c):" ["+c+"] ("+b+") "});a=a.replace(/\n[ \t\f]*/gi,"\n");a=a.replace(/\n\n+/gi,"\n");a=a.replace(/( |&nbsp;|\t)+/gi," ");a=a.replace(/\n +/gi,"\n");for(a=a.replace(/^ +/gi,"");0===a.indexOf("\n");)a=a.substring(1);a=a.replace(/\[image\] /gi,"[image] \n");if(0===a.length||a.lastIndexOf("\n")!==a.length-1)a+="\n";return a}
(function(a,b){if(this&&"function"===typeof this.define)this.define(b);else if("undefined"!==typeof module&&module.exports)module.exports=b();else{var f=b(),d=this,g=d[a];f.noConflict=function(){d[a]=g;return f};d[a]=f}})("createTextVersion",function(){return htmlToPlainText});